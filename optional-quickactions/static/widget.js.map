{"version":3,"file":null,"sources":["../src/widget.js"],"sourcesContent":["const {rpc, React, plugin, store} = Serverboards\nlet plugin_id=\"serverboards.optional.quickactions\"\nconst {Loading} = Serverboards.Components\n\nconst style={\n  a:{\n    display: \"block\",\n    padding: \"10px 10px\",\n    cursor: \"pointer\",\n    borderBottom: \"1px solid #eee\"\n  },\n  span: {\n    color: \"#666\"\n  },\n  list: {\n    padding: \"0 10px\"\n  }\n}\n\n\nconst Widget = React.createClass({\n  getInitialState(){\n    return {\n      actions: undefined,\n      loading: true\n    }\n  },\n  componentDidMount(){\n    plugin.start_call_stop(`serverboards.optional.quickactions/command`, \"list_actions\", {}).then( actions => {\n      this.setState({actions, loading: false})\n    })\n  },\n  runAction(a){\n    if (a.confirmation){\n      if (!confirm(a.name + \"\\n\\n\" + (a.description || a.confirm || \"Are you sure?\")))\n        return;\n    }\n    plugin.start_call_stop(`serverboards.optional.quickactions/command`, \"run_action\", [a.id]).then( () => {\n      Flash.info(\"Sucefully run action \"+a.name)\n    }).catch( e => Flash.error(e) )\n  },\n  render(){\n    if (this.state.loading)\n      return (\n        <Loading>Quick Actions</Loading>\n      )\n    const actions = this.state.actions.filter( a => a.star )\n    if (actions.length == 0){\n      return (\n        <div>\n          There are no Quick Actions yet. Create and star some\n          <a onClick={() => store.goto(`/serverboard/${this.props.serverboard}/serverboards.optional.quickactions/editor/`)}> here</a>\n        </div>\n      )\n    }\n    return (\n      <div className=\"ui list\" style={style.list}>\n        {actions.map( a => (\n          <a\n            onClick={() => this.runAction(a)}\n            style={style.a}\n            >\n            <i className={`ui icon ${a.icon || \"play\"}`}/>\n            <span style={style.span}>{a.name}</span>\n          </a>\n        ))}\n      </div>\n    )\n  }\n})\n\nfunction main(el, config){\n  Serverboards.ReactDOM.render(<Widget {...config}/>, el)\n  plugin_id = config.plugin\n\n  return function(){\n    Serverboards.ReactDOM.unmountComponentAtNode(el)\n  }\n}\n\nServerboards.add_widget(`${plugin_id}/widget`, main)\n"],"names":["Serverboards","rpc","React","plugin","store","plugin_id","Loading","Components","style","a","display","padding","cursor","borderBottom","span","color","list","Widget","createClass","getInitialState","actions","loading","componentDidMount","start_call_stop","then","setState","runAction","confirmation","confirm","name","description","id","Flash","info","catch","error","e","render","state","filter","star","length","goto","props","serverboard","map","icon","el","config","ReactDOM","unmountComponentAtNode","add_widget","main"],"mappings":";;;;;;kBAAoCA;AAA7BC,IAAAA,kBAAAA;AAAKC,IAAAA,oBAAAA;AAAOC,IAAAA,qBAAAA;AAAQC,IAAAA,oBAAAA;AACvBC,IAAAA,UAAU;AACR,IAAA,CAACC,eAAD,EAAYN,aAAaO;AAEzBC,IAAAA,MAAM,CACVC,EAAE,CACAC,QAAS,OADT,CAEAC,QAAS,WAFT,CAGAC,OAAQ,SAHR,CAIAC,aAAc,gBAJd,CADQ,CAOVC,KAAM,CACJC,MAAO,MADH,CAPI,CAUVC,KAAM,CACJL,QAAS,QADL,CAVI;AAgBNM,IAAAA,OAASf,MAAMgB,WAAN,CAAkB,sBAC/BC,eAD+B,2BACd,CACf,MAAO,CACLC,cADK,CAELC,UAFK,CAIR,CAN8B,CAO/BC,iBAP+B,6BAOZ,gBACjBnB,OAAOoB,eAAP,8CAAqE,cAArE,KAAyFC,IAAzF,CAA+F,WAAW,CACxG,MAAKC,QAAL,CAAc,CAACL,SAAD,CAAUC,UAAV,CAAd,CACD,CAFD,CAGD,CAX8B,CAY/BK,SAZ+B,oBAYrBjB,CAZqB,CAYnB,CACNA,EAAEkB,YADI,EAEJ,CAACC,QAAQnB,EAAEoB,IAAF,CAAS,MAAT,EAAmBpB,EAAEqB,WAAF,EAAiBrB,EAAEmB,OAAnB,EAA8B,eAAjD,CAAR,CAFG,EAKVzB,OAAOoB,eAAP,8CAAqE,YAArE,CAAmF,CAACd,EAAEsB,EAAH,CAAnF,EAA2FP,IAA3F,CAAiG,UAAM,CACrGQ,MAAMC,IAAN,CAAW,wBAAwBxB,EAAEoB,IAArC,CACD,CAFD,EAEGK,KAFH,CAEU,yBAAWC,KAAN,CAAYC,CAAZ,CAAL,CAFV,CAGD,CApB8B,CAqB/BC,MArB+B,kBAqBvB,iBACN,GAAI,KAAKC,KAAL,CAAWjB,OAAf,CACE,2BACG,OAAD,sBADF,CAGF,MAAgB,KAAKiB,KAAL,CAAWlB,OAAX,CAAmBmB,MAAnB,CAA2B,qBAAOC,IAAP,CAA3B,CAAhB,CALM,QAMF,IAAQC,MANN,CAQF,sFAEE,yBAAG,QAAS,gCAAYC,IAAN,iBAA2B,OAAKC,KAAL,CAAWC,WAAtC,+CAAN,CAAZ,UAFF,CARE,CAeJ,2BAAK,UAAU,SAAf,CAAyB,MAAOpC,MAAMQ,IAAtC,EACGI,EAAQyB,GAAR,CAAa,4CAEV,QAAS,iCAAWnB,SAAL,CAAejB,CAAf,CAAN,CADX,CAEE,MAAOD,MAAMC,CAFf,EAIE,yBAAG,sBAAsBA,EAAEqC,IAAF,EAAU,MAAhC,CAAH,EAJF,CAKE,4BAAM,MAAOtC,MAAMM,IAAnB,EAA0BL,EAAEoB,IAA5B,CALF,CADY,CAAb,CADH,CAYH,CAhD8B,CAAlB;AAmDf,aAAA,CAAckB,CAAd,CAAkBC,CAAlB,CAAyB,CAIvB,oBAHaC,QAAb,CAAsBZ,MAAtB,CAA6B,oBAAC,MAAD,CAAYW,CAAZ,CAA7B,CAAoDD,CAApD,CAGA,CAFA1C,UAAY2C,EAAO7C,MAEnB,CAAO,UAAU,CACfH,aAAaiD,QAAb,CAAsBC,sBAAtB,CAA6CH,CAA7C,CACD,CACF,CAED/C,aAAamD,UAAb,CAA2B9C,SAA3B,WAA+C+C,IAA/C;;"}